# 项目简介

> * IMApp 目录为安卓端，使用Android Studio开发。
> * IMServer 目录为后端，后端使用springboot mysql netty实现。
> * IMWeb 目录为后台管理前端。

# 项目目的

打造一款 即时通讯软件，帮助有梦想的技术人学习和探索。通过Issues的方式提出需求，开发者开发后关闭。



## 登陆模块

**注册**

- 验证码（可以先不加）
- SpringBoot + MyBatis（MySQL或MongoDB）实现用户数据持久化

**登陆**（上线）——这块儿逻辑为初步试探，没有设计性（仅供学习体验Netty所用，更优逻辑设计还需探索讨论）

- 向后台请求验证

- 验证成功之后，获取自身IP地址并同步后台数据（将本次上线的IP地址持久化）
- 同时，用本次IP地址与后端Netty服务器建立连接（将该客户端注入到ChannelGroup）
- Netty建立连接成功之后，修改用户数据——登陆状态

**退出**

- 主动退出登陆

  > 需要客户端主动断开与Netty服务器的连接，然后跳转到登陆界面。

- 强制退出APP

  > - 后台检测到连接断开之后，会remove掉该客户端对应的channel
  >
  > - 会修改后台数据——用户登陆状态
  > - 会修改后台数据——将用户本次登录所使用的IP制空（这点在逻辑上很重要）
  >   - 如果同一台设备先后使用不同的账户，但他们获取的IP很可能是一样的，这样就无法在Netty端作区分了，会造成非常严重的逻辑错误——用户区分错误，信息转发错误等。

## 用户模块

**好友关系**  ——以下两种模式其实差不多，只是展现形式不同，但  *关注模式*  可以可以用来探索一下 有向图！

- 关注模式

  > 相互关注了 可以私聊 和 发起群聊
  >
  > - 这地方的有意思之处在于可以研究一下 数据结构——有向图

- 申请模式

  > 发出申请，对方同意后便建立好友关系

## 聊天模块

**私聊**

- 在线状态——Netty转发+数据持久化

- 离线状态——数据持久化+上线消息提醒

  > 这就意味着，消息要加上 *查看状态* 
  >
  > > 当然，也可以选择不加，这样我们就需要记录用户上一次打开对话框的时间，跟聊天信息作对比就知道用户看没看过了。
  > >

**群聊**

- 同上。
